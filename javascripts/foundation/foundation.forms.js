!function(t,e,s,i){"use strict";Foundation.libs.forms={name:"forms",version:"4.3.1",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(e,s,i){return"object"==typeof s&&t.extend(!0,this.settings,s),"string"!=typeof s?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[s].call(this,i)},assemble:function(){t('form.custom input[type="radio"]',t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),t('form.custom input[type="checkbox"]',t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),t("form.custom select",t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var i=this;t(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(e){e.preventDefault(),e.stopPropagation(),i.toggle_checkbox(t(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(e){e.preventDefault(),e.stopPropagation(),i.toggle_radio(t(this))}).on("change.fndtn.forms","form.custom select",function(e,s){t(this).is('[data-customforms="disabled"]')||i.refresh_custom_select(t(this),s)}).on("click.fndtn.forms","form.custom label",function(e){if(t(e.target).is("label")){var s,n,o=t("#"+i.escape(t(this).attr("for"))).not('[data-customforms="disabled"]');0!==o.length&&("checkbox"===o.attr("type")?(e.preventDefault(),s=t(this).find("span.custom.checkbox"),0===s.length&&(s=o.add(this).siblings("span.custom.checkbox").first()),i.toggle_checkbox(s)):"radio"===o.attr("type")&&(e.preventDefault(),n=t(this).find("span.custom.radio"),0===n.length&&(n=o.add(this).siblings("span.custom.radio").first()),i.toggle_radio(n)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(e){var s=t(this),o=s.closest("div.custom.dropdown"),a=n(o,"select");return o.hasClass("open")||t(i.scope).trigger("click"),e.preventDefault(),!1===a.is(":disabled")?(o.toggleClass("open"),o.hasClass("open")?t(i.scope).on("click.fndtn.forms.customdropdown",function(){o.removeClass("open"),t(i.scope).off(".fndtn.forms.customdropdown")}):t(i.scope).on(".fndtn.forms.customdropdown"),!1):void 0}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(e){var i=t(this),o=i.closest("div.custom.dropdown"),a=n(o,"select"),d=0;if(e.preventDefault(),e.stopPropagation(),!t(this).hasClass("disabled")){t("div.dropdown").not(o).removeClass("open");var l=i.closest("ul").find("li.selected");if(l.removeClass("selected"),i.addClass("selected"),o.removeClass("open").find("a.current").text(i.text()),i.closest("ul").find("li").each(function(t){i[0]===this&&(d=t)}),a[0].selectedIndex=d,a.data("prevalue",l.html()),"undefined"!=typeof s.createEvent){var c=s.createEvent("HTMLEvents");c.initEvent("change",!0,!0),a[0].dispatchEvent(c)}else a[0].fireEvent("onchange")}}),t(e).on("keydown",function(e){var i=(s.activeElement,Foundation.libs.forms),n=t(".custom.dropdown.open");if(n.length>0){if(e.preventDefault(),13===e.which&&n.find("li.selected").trigger("click"),27===e.which&&n.removeClass("open"),e.which>=65&&e.which<=90){var o=i.go_to(n,e.which),a=n.find("li.selected");o&&(a.removeClass("selected"),i.scrollTo(o.addClass("selected"),300))}if(38===e.which){var a=n.find("li.selected"),d=a.prev(":not(.disabled)");d.length>0&&(d.parent()[0].scrollTop=d.parent().scrollTop()-i.outerHeight(d),a.removeClass("selected"),d.addClass("selected"))}else if(40===e.which){var a=n.find("li.selected"),o=a.next(":not(.disabled)");o.length>0&&(o.parent()[0].scrollTop=o.parent().scrollTop()+i.outerHeight(o),a.removeClass("selected"),o.addClass("selected"))}}}),this.settings.init=!0},go_to:function(t,e){var s=t.find("li"),i=s.length;if(i>0)for(var n=0;i>n;n++){var o=s.eq(n).text().charAt(0).toLowerCase();if(o===String.fromCharCode(e).toLowerCase())return s.eq(n)}},scrollTo:function(t,e){if(!(0>e)){var s=t.parent(),i=this.outerHeight(t),n=i*t.index()-s.scrollTop(),o=10*(n/e);this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(o,10))||(s[0].scrollTop=s.scrollTop()+o,this.scrollTo(t,e-10))}.bind(this),10)}},append_custom_markup:function(e,s){var i=t(s),n=i.attr("type"),o=i.next("span.custom."+n);i.parent().hasClass("switch")||i.addClass("hidden-field"),0===o.length&&(o=t('<span class="custom '+n+'"></span>').insertAfter(i)),o.toggleClass("checked",i.is(":checked")),o.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(e,s){var i,n=Foundation.libs.forms,o=t(s),a=o.next("div.custom.dropdown"),d=a.find("ul"),l=(a.find(".current"),a.find(".selector")),c=o.find("option"),r=c.filter(":selected"),h=o.attr("class")?o.attr("class").split(" "):[],f=0,u="",m=!1;if(0===a.length){var p=o.hasClass("small")?"small":o.hasClass("medium")?"medium":o.hasClass("large")?"large":o.hasClass("expand")?"expand":"";a=t('<div class="'+["custom","dropdown",p].concat(h).filter(function(t,e,s){return""===t?!1:s.indexOf(t)===e}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),l=a.find(".selector"),d=a.find("ul"),u=c.map(function(){var e=t(this).attr("class")?t(this).attr("class"):"";return"<li class='"+e+"'>"+t(this).html()+"</li>"}).get().join(""),d.append(u),m=a.prepend('<a href="#" class="current">'+r.html()+"</a>").find(".current"),o.after(a).addClass("hidden-field")}else u=c.map(function(){return"<li>"+t(this).html()+"</li>"}).get().join(""),d.html("").append(u);if(n.assign_id(o,a),a.toggleClass("disabled",o.is(":disabled")),i=d.find("li"),n.cache[a.data("id")]=i.length,c.each(function(e){this.selected&&(i.eq(e).addClass("selected"),m&&m.html(t(this).html())),t(this).is(":disabled")&&i.eq(e).addClass("disabled")}),!a.is(".small, .medium, .large, .expand")){a.addClass("open");var n=Foundation.libs.forms;n.hidden_fix.adjust(d),f=n.outerWidth(i)>f?n.outerWidth(i):f,Foundation.libs.forms.hidden_fix.reset(),a.removeClass("open")}},assign_id:function(t,e){var s=[+new Date,Foundation.random_str(5)].join("-");t.attr("data-id",s),e.attr("data-id",s)},refresh_custom_select:function(e,s){var i=this,n=0,o=e.next(),a=e.find("option"),d=o.find("li");(d.length!==this.cache[o.data("id")]||s)&&(o.find("ul").html(""),a.each(function(){var e=t("<li>"+t(this).html()+"</li>");o.find("ul").append(e)}),a.each(function(e){this.selected&&(o.find("li").eq(e).addClass("selected"),o.find(".current").html(t(this).html())),t(this).is(":disabled")&&o.find("li").eq(e).addClass("disabled")}),o.removeAttr("style").find("ul").removeAttr("style"),o.find("li").each(function(){o.addClass("open"),i.outerWidth(t(this))>n&&(n=i.outerWidth(t(this))),o.removeClass("open")}),d=o.find("li"),this.cache[o.data("id")]=d.length)},toggle_checkbox:function(t){var e=t.prev(),s=e[0];!1===e.is(":disabled")&&(s.checked=s.checked?!1:!0,t.toggleClass("checked"),e.trigger("change"))},toggle_radio:function(t){var e=t.prev(),s=e.closest("form.custom"),i=e[0];!1===e.is(":disabled")&&(s.find('input[type="radio"][name="'+this.escape(e.attr("name"))+'"]').next().not(t).removeClass("checked"),t.hasClass("checked")||t.toggleClass("checked"),i.checked=t.hasClass("checked"),e.trigger("change"))},escape:function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(e){var s=this;s.hidden=e.parents(),s.hidden=s.hidden.add(e).filter(":hidden"),s.hidden.each(function(){var e=t(this);s.tmp.push(e.attr("style")),e.css({visibility:"hidden",display:"block"})})},reset:function(){var e=this;e.hidden.each(function(s){var n=t(this),o=e.tmp[s];o===i?n.removeAttr("style"):n.attr("style",o)}),e.tmp=[],e.hidden=null}},off:function(){t(this.scope).off(".fndtn.forms")},reflow:function(){}};var n=function(e,s){for(var e=e.prev();e.length;){if(e.is(s))return e;e=e.prev()}return t()}}(Foundation.zj,this,this.document);